<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Enhanced C#: Loyc.Collections.SimpleCache&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Enhanced C#
   </div>
   <div id="projectbrief">Language of your choice: library documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<h1>Documentation moved to <a href="http://ecsharp.net/doc/code">ecsharp.net</a></h1>
<small>GitHub doesn't support HTTP redirects, so you'll be redirected in 3 seconds.</small>
<br/><br/>
<script>
setTimeout(function() {
	if (window.location.href.indexOf('http://loyc.net') == 0) {
	  window.location.href = 'http://ecsharp.net' + window.location.href.substr('http://loyc.net'.length);
	}
}, 3000);
</script>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Events</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLoyc.html">Loyc</a></li><li class="navelem"><a class="el" href="namespaceLoyc_1_1Collections.html">Collections</a></li><li class="navelem"><a class="el" href="classLoyc_1_1Collections_1_1SimpleCache_3_01T_01_4.html">SimpleCache< T ></a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#properties">Properties</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected fields</a> &#124;
<a href="classLoyc_1_1Collections_1_1SimpleCache_3_01T_01_4-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Loyc.Collections.SimpleCache&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A cache designed to save memory by sharing instances of identical strings and other immutable objects. 
 <a href="classLoyc_1_1Collections_1_1SimpleCache_3_01T_01_4.html#details">More...</a></p>
<hr/><b>Source file</b>:<ul>
<li><a href='https://github.com/qwertie/ecsharp/tree/master/Core/Loyc.Collections/Other/SimpleCache.cs'>/Core/Loyc.Collections/Other/SimpleCache.cs</a></li>
</ul>
<a name="details" id="details"></a><h2 class="groupheader">Remarks</h2>
<div class="textblock"><p>A cache designed to save memory by sharing instances of identical strings and other immutable objects.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>SimpleCache is not thread safe. However, G.Cache() is. </p>
<p>SimpleCache is used simply by calling Cache(). For example, if C is a SimpleCache(of string), then C.Cache("Hello") adds the string "Hello" to the cache if it is not present already, or returns the existing string if it is. </p>
<p>I'll describe SimpleCache as a two-way set associative hash cache. An object O with some hashcode X is always located at one of two locations in the cache: XS or (X+1)S, where S is the size of the hashtable. If C.Cache(O) is called and O is not in the cache, O is always placed at position XS. If another object P with hash Y is added, and YS == XS, then O is moved to position (X+1)S so that P can take the position. Thus, an object is only located in the "plus one" position if it was less recently used, and the cache will choose to discard that object when necessary. </p>
<p>The cache size doubles when the number of objects discarded (replacements) reaches the cache size, provided that the cache is at least 50% used. The initial size is normally 32, and the maximum size can be specified in the constructor (default: 1024). Note that regardless of cache size, it is impossible for three objects to be in the cache at the same time if they all share the same hash code. But on the plus side, if you alternate between calling Cache(A) and Cache(B), for any A and B, you are guaranteed to get only cache hits in steady-state. (To prove this, by the way, one must consider not only when A and B have the same hash code, but when A.GetHashCode() == B.GetHashCode() + 1). </p>
<p>The algorithm is pretty simple&ndash;Cache() has no loops&ndash;so it should be quite fast as well. </p>
<p>TODO: try supporting hashtables with non-power-of-2 sizes for possible speedup. </p>
<div class="typeconstraint">
<dl><dt><b>Type Constraints</b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>T</em></td><td>&#160;:</td><td valign="top"><em>class</em></td><td>&#160;</td></tr>
</table>
</dl>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:a741e21b472ef6727de672c71e4c4764e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a741e21b472ef6727de672c71e4c4764e"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>CacheHits</b><code> [get]</code></td></tr>
<tr class="separator:a741e21b472ef6727de672c71e4c4764e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b8de56a46153477fcb74c590551dbc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1b8de56a46153477fcb74c590551dbc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>CacheMisses</b><code> [get]</code></td></tr>
<tr class="separator:af1b8de56a46153477fcb74c590551dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1927e36169514dc44c18bba8aa2da671"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1927e36169514dc44c18bba8aa2da671"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SimpleCache</b> (int maxSize)</td></tr>
<tr class="separator:a1927e36169514dc44c18bba8aa2da671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fe716db4484499ddeb36e4923ff8d63"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8fe716db4484499ddeb36e4923ff8d63"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>SimpleCache</b> (int maxSize, IEqualityComparer&lt; T &gt; comparer)</td></tr>
<tr class="separator:a8fe716db4484499ddeb36e4923ff8d63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe2a44c109489d49c8e0674489be0bcf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abe2a44c109489d49c8e0674489be0bcf"></a>
T&#160;</td><td class="memItemRight" valign="bottom"><b>Cache</b> (T obj)</td></tr>
<tr class="separator:abe2a44c109489d49c8e0674489be0bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae978693853bc07acaa682c8145be80d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae978693853bc07acaa682c8145be80d5"></a>
<a class="el" href="structLoyc_1_1void.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Clear</b> ()</td></tr>
<tr class="separator:ae978693853bc07acaa682c8145be80d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c5fa3fc462a13780309f22945d443c6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c5fa3fc462a13780309f22945d443c6"></a>
<a class="el" href="structLoyc_1_1void.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><b>DebugCheck</b> ()</td></tr>
<tr class="separator:a3c5fa3fc462a13780309f22945d443c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4b453864ac6f089a664073ee1a3b9290"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b453864ac6f089a664073ee1a3b9290"></a>
<a class="el" href="structLoyc_1_1void.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Enlarge</b> ()</td></tr>
<tr class="separator:a4b453864ac6f089a664073ee1a3b9290"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected fields</h2></td></tr>
<tr class="memitem:ad2330f3db2c8d2dd55972d3f1069f50d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad2330f3db2c8d2dd55972d3f1069f50d"></a>
IEqualityComparer&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_comparer</b></td></tr>
<tr class="separator:ad2330f3db2c8d2dd55972d3f1069f50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70ce4f9a2f3156b483e1b08c1a3e9b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad70ce4f9a2f3156b483e1b08c1a3e9b9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_mask</b></td></tr>
<tr class="separator:ad70ce4f9a2f3156b483e1b08c1a3e9b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecbf164bb1de2f86c0e57afc31d5ba85"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecbf164bb1de2f86c0e57afc31d5ba85"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_maxSize</b></td></tr>
<tr class="separator:aecbf164bb1de2f86c0e57afc31d5ba85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1efe27de8a485d69bb6b15b4294f02d2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1efe27de8a485d69bb6b15b4294f02d2"></a>
T[]&#160;</td><td class="memItemRight" valign="bottom"><b>_table</b></td></tr>
<tr class="separator:a1efe27de8a485d69bb6b15b4294f02d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0875d2c57a14bacd68c8701fd634bd2a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0875d2c57a14bacd68c8701fd634bd2a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_replacementCount</b></td></tr>
<tr class="separator:a0875d2c57a14bacd68c8701fd634bd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa854090498bb98a5821946c9157d78c2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa854090498bb98a5821946c9157d78c2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_inUse</b></td></tr>
<tr class="separator:aa854090498bb98a5821946c9157d78c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa12173655fb8d3f9835ff6ad8176804b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa12173655fb8d3f9835ff6ad8176804b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_cacheHits</b></td></tr>
<tr class="separator:aa12173655fb8d3f9835ff6ad8176804b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 24 2016 09:22:19 for Enhanced C# by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
